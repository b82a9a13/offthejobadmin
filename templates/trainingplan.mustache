<link rel="stylesheet" type="text/css" href="./classes/css/trainingplan.css">
<button class='btn btn-primary' onclick="window.location.href='./admin.php'">Back to main menu</button>
<button class='btn btn-primary' onclick="window.location.href='./admin_user.php?cid={{cid}}&uid={{uid}}'" id="back_to_user">Back to user menu</button>
<h1 class='text-center'><b>{{fullname}}'s Training Plan</b></h1>
<h1 class='text-center'><b>{{coursename}}</b></h1>
<form action="" id="plan_form">
    <table class='table table-bordered table-striped table-hover'>
        <thead>
            <tr>
                <th>Name</th>
                <th>Employer</th>
                <th>Start Date</th>
                <th>Planned End Date</th>
                <th>Length of Programme</th>
                <th>OTJH</th>
                <th>EPAO</th>
                <th>Funding Source</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="td_name"><input class='w-100' type='text' id="name" required value="{{learnername}}"></td>
                <td id="td_employer"><input class='w-100' type='text' id="employer" required value="{{employer}}"></td>
                <td id="td_startdate"><input class='w-100' type="date" id="startdate" required value="{{startdate}}"></td>
                <td id="td_planenddate"><input class='w-100' type="date" id="planenddate" required value="{{plannedendd}}"></td>
                <td id="td_lengthofprog"><input class='w-100' type="number" id="lengthofprog" required value="{{lengthofprog}}"></td>
                <td id="td_otjh"><input class='w-100' type="number" id="otjh" required value="{{otjh}}"></td>
                <td id="td_epao">
                    <select class='w-100' id="epao" required>
                        <option disabled {{epao_default}} value="">Choose EPAO</option>
                        <option value="frawards" {{frawards}}>FR Awards</option>
                        <option value="candg" {{candg}}>C & G</option>
                        <option value="innovate" {{innovate}}>Innovate</option>
                        <option value="dsw" {{dsw}}>DSW</option>
                        <option value="nocn" {{nocn}}>NOCN</option>
                    </select>
                </td>
                <td id="td_fundsource">
                    <select class='w-100' id="fundsource" required>
                        <option disabled {{fund_default}} value="">Choose Funding Source</option>
                        <option value="contrib" {{contrib}}>5% Contribution</option>
                        <option value="levy" {{levy}}>Levy</option>
                    </select>
                </td>
            </tr>
        </tbody>
    </table>
    <table class='table table-bordered table-striped table-hover'>
        <h3>Initial Assessment</h3>
        <thead>
            <tr>
                <th>BKSB Result Maths</th>
                <th>BKSB Result English</th>
                <th>Learning Style</th>
                <th>Skill Scan Learner Result</th>
                <th>Skill Scan Employer Result</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="td_bksbrm"><input class='w-100' type='number' id="bksbrm" required value="{{bksbrm}}"></td>
                <td id="td_bksbre"><input class='w-100' type='number' id="bksbre" required value="{{bksbre}}"></td>
                <td id="td_learnstyle">
                    <select class='w-100' id="learnstyle" required>
                        <option disabled {{learnstyle_default}} value="">Choose Learning Style</option>
                        <option value="visual" {{visual}}>Visual</option>
                        <option value="auditory" {{auditory}}>Auditory</option>
                        <option value="kinaesthetic" {{kinaesthetic}}>Kinaesthetic</option>
                    </select>
                </td>
                <td id="td_skillscanlr"><input class='w-100' type='text' id="skillscanlr" required value="{{skillscanlr}}"></td>
                <td id="td_skillscaner"><input class='w-100' type='text' id="skillscaner" required value="{{skillscaner}}"></td>
            </tr>
        </tbody>
    </table>
    <table class='table table-bordered table-striped table-hover'>
        <h3>Off The Job Calculation</h3>
        <thead>
            <tr>
                <th>Apprentice Hours Per Week</th>
                <th>Weeks on Programme</th>
                <th>Less Annual Leave</th>
                <th>Hours Per Week</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="td_apprenhpw"><input class='w-100' type="number" id="apprenhpw" step="0.01" required value="{{hpw}}"></td>
                <td id="td_weeksonprog"><input class='w-100' type="number" id="weeksonprog" step="1" required value="{{wop}}"></td>
                <td id="td_annualleave"><input class='w-100' type="number" id="annualleave" step="0.01" required value="{{annuallw}}"></td>
                <td id="td_hoursperweek"><input class='w-100' type="number" id="hoursperweek" step="0.01" required value="{{hoursperweek}}"></td>
            </tr>
        </tbody>
    </table>
    <table class='table table-bordered table-striped table-hover'>
        <h3>Aspirations & Career Goals</h3>
            <tr class='d-flex'>
                <th class='w-25'>Area of strength</th>
                <td class='w-75' id="td_aostrength"><textarea class='w-100' id="aostrength" required>{{aostrength}}</textarea></td>
            </tr>
            <tr class='d-flex'>
                <th class='w-25'>Long Term Goals</th>
                <td class='w-75' id="td_ltgoals"><textarea class='w-100' id="ltgoals" required>{{ltgoals}}</textarea></td>
            </tr>
            <tr class='d-flex'>
                <th class='w-25'>Short Term Goals</th>
                <td class='w-75' id="td_stgoals"><textarea class='w-100' id="stgoals" required>{{stgoals}}</textarea></td>
            </tr>
            <tr class='d-flex'>
                <th class='w-25'>IAG (Information, Advice, Guidance)</th>
                <td class='w-75' id="td_iaguide"><textarea class='w-100' id="iaguide" required>{{iaguide}}</textarea></td>
            </tr>
    </table>
    <table class='table table-bordered table-striped table-hover'>
        <thead>
            <tr>
                <th>Recognition of Prior Learning (use this section to describe and evidence any prior learning, qualifications, work experience etc).</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="td_recopl"><textarea class='w-100' id="recopl" required>{{recopl}}</textarea></td>
            </tr>
        </tbody>
    </table>
    <table class='table table-bordered table-striped table-hover'>
        <thead>
            <tr>
                <th>Modules</th>
                <th>Planned Start Date</th>
                <th>Revised Start Date</th>
                <th>Planned End Date</th>
                <th>Revised End Date</th>
                <th>Module Weighting %</th>
                <th>Planned OTJH</th>
                <th>Method of Delivery</th>
                <th>OTJ Tasks</th>
                <th>Actual OTJH completed (as per log)</th>
            </tr>
        </thead>
        <tbody>
            {{#modulesarray}}
                <tr>
                    <td class='td-mod-m'><textarea class='w-100 mod-m' required>{{0}}</textarea></td>
                    <td class='td-mod-psd'><input class='w-100 mod-psd' type='date' required></td>
                    <td class='td-mod-rsd'><input class='w-100 mod-rsd' type='date' {{new_disabled}}></td>
                    <td class='td-mod-ped'><input class='w-100 mod-ped' type='date' required></td>
                    <td class='td-mod-red'><input class='w-100 mod-red' type='date' {{new_disabled}}></td>
                    <td class='td-mod-mw'><input class='w-100 mod-mw' type='number' step='0.01' required value='{{1}}'></td>
                    <td class='td-mod-potjh'><input class='w-100 mod-potjh' type='number' step='0.01' required value='{{3}}'></td>
                    <td class='td-mod-mod'><textarea class='w-100 mod-mod' required>{{2}}</textarea></td>
                    <td class='td-mod-otjt'><textarea class='w-100 mod-otjt' required></textarea></td>
                    <td><input class='w-100' disabled></td>
                </tr>
            {{/modulesarray}}
            {{#modarray}}
                <tr>
                    <td class='td-mod-m'><textarea class='w-100 mod-m' required>{{1}}</textarea></td>
                    <td class='td-mod-psd'><input class='w-100 mod-psd' type='date' required value="{{2}}"></td>
                    <td class='td-mod-rsd'><input class='w-100 mod-rsd' type='date' {{new_disabled}} value="{{3}}"></td>
                    <td class='td-mod-ped'><input class='w-100 mod-ped' type='date' required value="{{4}}"></td>
                    <td class='td-mod-red'><input class='w-100 mod-red' type='date' {{new_disabled}} value="{{5}}"></td>
                    <td class='td-mod-mw'><input class='w-100 mod-mw' type='number' step='0.01' required value='{{6}}'></td>
                    <td class='td-mod-potjh'><input class='w-100 mod-potjh' type='number' step='0.01' required value='{{7}}'></td>
                    <td class='td-mod-mod'><textarea class='w-100 mod-mod' required>{{8}}</textarea></td>
                    <td class='td-mod-otjt'><textarea class='w-100 mod-otjt' required>{{9}}</textarea></td>
                    <td><input class='w-100' disabled value="{{10}}"></td>
                </tr>
            {{/modarray}}
            <tr>
                <th>Totals</th>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{total_mw}}</td>
                <td>{{total_otjh}}</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>
    {{#fsrequired}}
        <div class='d-flex'><h2>Required functional skills?</h2><p id='td_fscheckbox'><input class='ml-1 mt-3' type='checkbox' id='fscheckbox'></p></div>
    {{/fsrequired}}
    {{#fsarray}}
    <div style='display: {{0}};' id='fs_div'>
        <table class='table table-bordered table-striped table-hover'>
            <h3>Functional Skills Delivery</h3>
            <p>
                As part of NTA's commitment to both yourself and your employer we will always work with you to ensure you reach your maximum potential during and after your apprenticeship where possible. As part of this we will encourage you to over-achieve the minimum requirement needed for Maths & English. Where we feel there is time and potential to work towards a higher level of Maths & English during the planned time of your apprenticeships, we will provide the support and learning platform to help you reach higher goals.
            </p>
            <thead>
                <tr>
                    <th>Functional Skills</th>
                    <th>Level</th>
                    <th>Method of Delivery</th>
                    <th>Start Date</th>
                    <th>Planned End Date</th>
                    <th>Actual End Date</th>
                    <th>Actual End/Achievment Date</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td id='td_mathfs'><input class='w-100' type='text' id='mathfs' value="{{mathfs}}"></td>
                    <td id='td_mathlevel'><input class='w-100' type='number' id='mathlevel' value="{{mathlevel}}"></td>
                    <td id='td_mathmod'><textarea class='w-100' id='mathmod'>{{mathmod}}{{defualt_fs_tor}}</textarea></td>
                    <td id='td_mathsd'><input class='w-100' type='date' id='mathsd' value="{{mathsd}}"></td>
                    <td id='td_mathped'><input class='w-100' type='date' id='mathped' value="{{mathped}}"></td>
                    <td id='td_mathaed'><input class='w-100' type='date' id='mathaed' {{new_disabled}} value="{{mathaed}}"></td>
                    <td id='td_mathaead'><input class='w-100' type='date' id='mathaead' {{new_disabled}} value="{{mathaead}}"></td>
                </tr>
                <tr>
                    <td id='td_engfs'><input class='w-100' type='text' id='engfs' value="{{engfs}}"></td>
                    <td id='td_englevel'><input class='w-100' type='number' id='englevel' value="{{englevel}}"></td>
                    <td id='td_engmod'><textarea class='w-100' id='engmod'>{{engmod}}{{defualt_fs_tor}}</textarea></td>
                    <td id='td_engsd'><input class='w-100' type='date' id='engsd' value="{{engsd}}"></td>
                    <td id='td_engped'><input class='w-100' type='date' id='engped' value="{{engped}}"></td>
                    <td id='td_engaed'><input class='w-100' type='date' id='engaed' {{new_disabled}} value="{{engaed}}"></td>
                    <td id='td_engaead'><input class='w-100' type='date' id='engaead' {{new_disabled}} value="{{engaead}}"></td>
                </tr>
            </tbody>
        </table>
    </div>
    {{/fsarray}}
    <table class='table table-bordered table-striped table-hover' id="prog_table">
        <h3>Progress Reviews</h3>
        <thead>
            <tr>
                <th>Type of Review</th>
                <th>Planned Review</th>
                <th>Actual Review</th>
            </tr>
        </thead>
        <tbody id="pr_tbody">
            {{#prarray}}
                <tr class='tr-td-pr'>
                    <td class='td-pr-type'>
                        <select class='w-100 pr-type' required {{6}}>
                            <option disabled {{progreview_default}} value="" {{1}}>Learner/Employer</option>
                            <option value='Learner' {{2}}>Learner</option>
                            <option value='Employer' {{3}}>Employer</option>
                        </select>
                    </td>
                    <td class='td-pr-pr'><input class='w-100 pr-pr' type='date' required value="{{4}}" {{6}}></td>
                    <td class='td-pr-ar'><input class='w-100 pr-ar' type='date' {{new_disabled}} value="{{5}}"></td>
                </tr>
            {{/prarray}}
        </tbody>
    </table>
    {{#prbtns}}
        <button type="button" class="btn btn-primary m-1" onclick="addprRecord()" id="pr_addnewrecord">Add New Record</button>
        <button type="button" class="btn btn-primary m-1" onclick="removeprRecord()" id="pr_removerecord" disabled>Remove Record</button>
    {{/prbtns}}
    <table class='table table-bordered table-striped table-hover'>
        <thead>
            <tr>
                <th>Additional Support Arrangements</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="td_addsa"><textarea class='w-100' id="addsa">{{addsa}}</textarea></td>
            </tr>
        </tbody>
    </table>
    <table class='table table-bordered table-striped table-hover'>
        <h3>Changes Log (to be used as an ongoing journal to record any changes to original plan throughout the apprenticeship).</h3>
        <thead>
            <tr>
                <th>Date of Change</th>
                <th>Log</th>
            </tr>
        </thead>
        <tbody>
            {{#logarray}}
                <tr>
                    <td id="td_cl_date{{2}}"><input class='w-100' id="cl_date{{2}}" type="date" {{new_disabled}} value="{{0}}" {{2}}></td>
                    <td id="td_cl_log{{2}}"><textarea class='w-100' id="cl_log{{2}}" {{new_disabled}} {{2}}>{{1}}</textarea></td>
                </tr>
            {{/logarray}}
        </tbody>
    </table>
    <h1 style="display:none;" class='text-error' id="tp_error"></h1>
    {{#successUpdate}}
        <h1 class='text-success' id="tplan_success">{{0}}</h1>
    {{/successUpdate}}
    <button class='btn btn-primary w-100' type="submit" name="submit">Submit</button>
</form>
<script defer src='./classes/js/trainingplan.js'></script>