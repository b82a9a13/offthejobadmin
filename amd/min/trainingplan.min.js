function addprRecord(){const e="<td class='td-pr-type'><select class='w-100 pr-type' required><option disabled value='' selected>Learner/Employer</option><option value='Learner'>Learner</option><option value='Employer'>Employer</option></select></td><td class='td-pr-pr'><input class='w-100 pr-pr' type='date' required></td><td class='td-pr-ar'><input class='w-100 pr-ar' type='date'></td>",t=document.createElement("tr");t.className="tr-td-pr tr-td-pr-new",t.innerHTML=e,$("#pr_tbody")[0].appendChild(t),$("#pr_removerecord")[0].disabled=!1}function removeprRecord(){const e=document.querySelectorAll(".tr-td-pr-new"),t=e.length;t>0&&(e[t-1].remove(),1==t&&($("#pr_removerecord")[0].disabled=!0))}$("#plan_form")[0].addEventListener("submit",e=>{e.preventDefault();const t=["name","employer","startdate","planenddate","lengthofprog","otjh","epao","fundsource","bksbrm","bksbre","learnstyle","skillscanlr","skillscaner","apprenhpw","weeksonprog","annualleave","hoursperweek","aostrength","ltgoals","stgoals","iaguide","recopl","addsa","cl_daterequired","cl_logrequired"];null!==$("#mathaed")[0]&&t.push("mathfs","mathlevel","mathmod","mathsd","mathped","engfs","englevel","engmod","engsd","engped","mathaed","mathaead","engaed","engaead");const r=[["mod-m","mod-psd","mod-ped","mod-mw","mod-potjh","mod-mod","mod-rsd","mod-red","mod-otjt"],["pr-type","pr-pr","pr-ar"]];let o="";t.forEach(function(e){console.log($(`#${e}`)[0].value),o+=`${e}=${$(`#${e}`)[0].value.replaceAll("&","($)")}&`,$(`#td_${e}`)[0].style.background=""});let l=0;r[0].forEach(function(e){const t=document.querySelectorAll(`.${e}`),r=document.querySelectorAll(`.td-${e}`);for(let l=0;l<t.length;l++)o+=`${e}-${l}=${t[l].value.replaceAll("&","($)")}&`,r[l].style.background="";l=l<t.length?t.length:l}),o+=`mod-total=${l}&`,l=0,pos=0,r[1].forEach(function(e){const t=document.querySelectorAll(`.${e}`),r=document.querySelectorAll(`.td-${e}`);for(let l=0;l<t.length;l++)o+=`${e}-${l}=${t[l].value}&`,r[l].style.background="";l=l<t.length?t.length:l,pos++}),o+=`pr-total=${l}`;const n=$("#tp_error")[0];n.style.display="none";const d=new XMLHttpRequest;d.open("POST","./classes/inc/trainingplan.inc.php",!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);e.error?(n.innerText="Invalid values: ",e.error.forEach(function(e){t.includes(e[0])?$(`#td_${e[0]}`)[0].style.background="red":r[0].includes(e[0])?document.querySelectorAll(".td-"+e[0])[e[2]].style.background="red":r[1].includes(e[0])&&(document.querySelectorAll(".td-"+e[0])[e[2]].style.background="red"),n.innerText+=e[1]+"|"}),n.style.display="block"):e.return?window.location.reload():(n.innerText="Submit error.",n.style.display="block")}else n.innerText="Connection error.",n.style.display="block"},d.send(o)});